---
layout: base.njk
---

{# Define the target URL based on frontmatter #}
{% set targetUrl = data['in-reply-to'] or data['bookmark-of'] or data['like-of'] or data['repost-of'] %}

{# Asynchronously fetch the context data #}
{% set context = targetUrl | fetchContext %}

<article class="h-entry">
  {% if tags %}
  <ul>
    {% for tag in tags %}
      <li>{{ tag }}</li>
    {% endfor %}
  </ul>
  {% endif %}

  {# Render the context block if fetch was successful #}
  {% if context and not context.error %}
    {% set ctx = context %}
    {% include "components/context-cite.njk" %}
  {% elif targetUrl %}
    <p class="reply-context-fallback">
      Liked <a href="{{ targetUrl }}">{{ targetUrl }}</a>
    </p>
  {% endif %}

  {% if content %}
    <div class="e-content">
      {{ content | safe }}
    </div>
  {% endif %}

  <a class="u-url" href="{{ page.url }}">
    <time class="dt-published" datetime="{{ date | htmlDateString }}">
      {{ date | readableDate }}
    </time>
  </a>
</article>

{% include "components/webmentions.njk" %}
